<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>RCF LAB</title>
    <style>
        html{
            padding: 2em;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
            font-size: 16px;
            font-weight: 400;
        }
    </style>
    <script src="/socket.io/socket.io.js"></script>
    <script src="https://code.jquery.com/jquery-1.11.1.js"></script>
    <script>
        $(function () {
            var socket = io();

            $('#login-form').submit(function(){
              var elem = $('#login-input-textbox');
              socket.emit('login', elem.val());
              elem.val('');
              return false;
            });

            socket.on('logged-in', function(u){
                $('#login').attr('style','display:none;');
                $('#chat-input-textbox').attr('placeholder',"Send a message...");
                $('#chat').attr('style','display:block;');
            });

            $('#chat-form').submit(function(){
                socket.emit('message', $('#chat-input-textbox').val());
                $('#chat-input-textbox').val('');
                return false;
              });



            socket.on('message out', function(m){
                $('#messages').append(
                    $("<li><span style=\"color:"+m.usercolor+"\">"+ m.username+"</span>: "+m.message+"</li>"));
            });

            socket.on('announce', function(m){
                $('#messages').append(
                    $("<li>User <span style=\"color:"+m.usercolor+"\">"+ m.username+"</span> "+m.message+"</li>"));
            });

          });
    </script>
  </head>
  <body>

    <!-- TITLEBAR/LOGO MARKUP -->

    <div class="page-section" id="title">
      <h1 class="page-title">Express + Socket.IO Test</h1>
      <p>
        Node.JS frameworks Express and Socket.IO enable developers to quickly prototype apps requiring bi-directional communication between the client and server. See below for a chat app and leaderboards for this <a href="/trivia">simple trivia.</a>
      </p>

    </div>

    <!-- LOGIN MARKUP -->

    <div class="page-section" id="login">
        <h2>Please Log In to Chat</h2>
        <form id="login-form" action="">
                <input type="text" placeholder="Username" id="login-input-textbox" autocomplete="off"/>
                <button>Log In</button>
        </form>
    </div>


    <!-- CHAT MARKUP -->

    <div class="page-section" id="chat" style="display:none;">
      <h2>Chat</h2>
      <div class="chat-window">
        <ul id="messages"></ul>
      </div>
      <div class="chat-input tall">
          <form id="chat-form" action="">
              <input id="chat-input-textbox" placeholder="Login to send messages" autocomplete="off" />
              <button>Send</button>
          </form>
      </div>
    </div>



  </body>
</html>